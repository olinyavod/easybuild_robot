# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥–µ /build

## –î–∞—Ç–∞: 27 –æ–∫—Ç—è–±—Ä—è 2025

### –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ö–æ–º–∞–Ω–¥–∞ `/build` –±—ã–ª–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `BuildCommand` (`build_command.py`)

**–ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í –≥—Ä—É–ø–ø–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–ª—è —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã (—á–µ—Ä–µ–∑ `allowed_group_ids`)
- –í –ª–∏—á–Ω–æ–º —á–∞—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
- –ü—Ä–æ–µ–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞:
  - ü¶ã - Flutter
  - üî∑ - .NET MAUI
  - üî∂ - Xamarin
  - üì¶ - –î—Ä—É–≥–∏–µ —Ç–∏–ø—ã
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–§–æ—Ä–º–∞—Ç callback_data:** `build_project:<project_id>`

#### 2. –°–æ–∑–¥–∞–Ω `ProjectSelectCallbackCommand` (`project_select_callback.py`)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–æ–Ω–∏—Ä—É–µ—Ç git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —á–µ—Ä–µ–∑ `git fetch --all`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ..."

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- Timeout –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: 5 –º–∏–Ω—É—Ç
- Timeout –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2 –º–∏–Ω—É—Ç—ã
- –í—ã–≤–æ–¥ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

#### 3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π callback –≤ `factory.py`

–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è `ProjectSelectCallbackCommand` –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–º–∞–Ω–¥.

### Workflow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/build`
2. –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
4. –ë–æ—Ç:
   - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - –ò–õ–ò –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
5. –ë–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
6. *–î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ*

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–í –ª–∏—á–Ω–æ–º —á–∞—Ç–µ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /build
–ë–æ—Ç: üî® –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏ (–≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ):
     [ü¶ã ChecklistApp]
     [üî∑ MyMauiApp]
     [üî∂ XamarinApp]

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ ChecklistApp]
–ë–æ—Ç: üî® –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞: ChecklistApp
     üì¶ –¢–∏–ø: flutter
     üåø –í–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: develop
     üè∑ –í–µ—Ç–∫–∞ —Ä–µ–ª–∏–∑–∞: main
     
     üì• –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏–∑ https://github.com/...
     ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ /var/repos/checklist
     
     ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
     üìç –ü—É—Ç—å: /var/repos/checklist
     üìÑ –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞: app/pubspec.yaml
     
     –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ...
```

**–í –≥—Ä—É–ø–ø–µ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: @bot /build
–ë–æ—Ç: üî® –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏ (–¥–ª—è —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã):
     [ü¶ã ChecklistApp]
     [üî∑ GroupApp]
     
     # –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö 
     # group_id –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ allowed_group_ids
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

#### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã Storage:
- `get_projects_for_group(group_id)` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø—ã
- `get_all_projects()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
- `get_project_by_id(project_id)` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –ø–æ ID

#### Git –æ–ø–µ—Ä–∞—Ü–∏–∏:
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `git clone --recurse-submodules <url> <path>`
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ç–∫—É: `git -C <path> checkout <branch>`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: `git -C <path> fetch --all`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π: `git -C <path> pull origin <branch>`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–º–æ–¥—É–ª–µ–π: `git -C <path> submodule update --init --recursive`

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –±–æ—Ç—É
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `_check_user_access()`
- –í –≥—Ä—É–ø–ø–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤

### TODO (–±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –≤–µ—Ç–∫–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ (dev/release)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ç–∫—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≥–æ—Ç–æ–≤—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–±–æ—Ä–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–±–æ—Ä–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### –§–∞–π–ª—ã, –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

1. `python/src/easybuild_bot/commands/implementations/build_command.py` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
2. `python/src/easybuild_bot/commands/implementations/project_select_callback.py` - —Å–æ–∑–¥–∞–Ω
3. `python/src/easybuild_bot/commands/factory.py` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –°—Ç–∞—Ä—ã–π `BuildApkCallbackCommand` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python subprocess module (–¥–ª—è git –æ–ø–µ—Ä–∞—Ü–∏–π)
- Git –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º (–ø–æ URL –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)


