# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Command ‚Äî –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–Ø —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –ø–∞—Ç—Ç–µ—Ä–Ω Command –¥–ª—è –≤–∞—à–µ–≥–æ Telegram-–±–æ—Ç–∞. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ä–æ—Å—Ç–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥.

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ –∏ –ü–æ—Å–ª–µ

### ‚ùå –ë–´–õ–û (–°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –û–≥—Ä–æ–º–Ω—ã–π —Ñ–∞–π–ª `bot.py` (764 —Å—Ç—Ä–æ–∫–∏)
- –î–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ `if/elif` –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –°–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ö–æ–¥:**
```python
# bot.py - 764 —Å—Ç—Ä–æ–∫–∏
async def msg_echo(self, update, context):
    # ... 50+ —Å—Ç—Ä–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ ...
    
    match_result = self.command_matcher.match_command(text)
    
    if match_result:
        command, similarity, params = match_result
        
        # üëé –†–∞—Å—Ç–µ—Ç —Å –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–æ–π!
        if command == "/start":
            await self.cmd_start(update, context)
        elif command == "/help":
            await self.cmd_help(update, context)
        elif command == "/build":
            await self.cmd_build(update, context)
        elif command == "/register_group":
            await self.cmd_register_group(update, context)
        elif command == "/users":
            await self.cmd_users(update, context)
        elif command == "/groups":
            await self.cmd_groups(update, context)
        elif command == "/unblock_user":
            await self.cmd_unblock_user(update, context, params)
        elif command == "/block_user":
            await self.cmd_block_user(update, context, params)
        else:
            await message.reply_text("–ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞")
```

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±–æ–≤–∞–ª–æ:**
1. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `cmd_xxx()` –≤ `EasyBuildBot`
2. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ `request_access()` –∏–ª–∏ `request_admin_access()`
3. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å `elif` –≤–µ—Ç–∫—É –≤ `msg_echo()`
4. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å `elif` –≤–µ—Ç–∫—É –≤ `handle_voice()`
5. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –≤ `CommandMatcher.commands`
6. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ `CommandMatcher.param_patterns`
7. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å `CommandHandler` –≤ `setup_handlers()`

**–ò—Ç–æ–≥–æ: 7 –º–µ—Å—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è!** üò∞

---

### ‚úÖ –°–¢–ê–õ–û (Command Pattern)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ú® –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚ú® –ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ú® –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- ‚ú® –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–ö–æ–¥:**
```python
# bot_v2.py - –≤—Å–µ–≥–æ 500 —Å—Ç—Ä–æ–∫ (–≤–º–µ—Å—Ç–æ 764!)
async def msg_echo(self, update, context):
    # ... –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
    
    # üëç –í—Å–µ–≥–æ 3 —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ 50!
    cmd_ctx = CommandContext(update, context, {}, text)
    result = await self.command_executor.match_and_execute(text, cmd_ctx)
    
    if not result:
        await message.reply_text("–ù–µ –ø–æ–Ω–∏–º–∞—é –∫–æ–º–∞–Ω–¥—É")
```

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É–µ—Ç:**
1. ‚úèÔ∏è –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `my_command.py` —Å –∫–ª–∞—Å—Å–æ–º –∫–æ–º–∞–Ω–¥—ã
2. ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –≤ `factory.py`: `MyCommand(storage, admin_token)`

**–ò—Ç–æ–≥–æ: 2 –º–µ—Å—Ç–∞ (1 –Ω–æ–≤—ã–π —Ñ–∞–π–ª + 1 —Å—Ç—Ä–æ–∫–∞)!** üéâ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
commands/
‚îú‚îÄ‚îÄ base.py                    ‚Üê –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Command
‚îÇ   ‚îî‚îÄ‚îÄ Command
‚îÇ       ‚îú‚îÄ‚îÄ get_command_name()
‚îÇ       ‚îú‚îÄ‚îÄ get_semantic_tags()
‚îÇ       ‚îú‚îÄ‚îÄ can_execute()
‚îÇ       ‚îú‚îÄ‚îÄ execute()
‚îÇ       ‚îî‚îÄ‚îÄ get_parameter_patterns()
‚îÇ
‚îú‚îÄ‚îÄ registry.py                ‚Üê –†–µ–µ—Å—Ç—Ä –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ CommandRegistry
‚îÇ       ‚îú‚îÄ‚îÄ register()
‚îÇ       ‚îú‚îÄ‚îÄ get_command()
‚îÇ       ‚îî‚îÄ‚îÄ match_command()    ‚Üê –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
‚îÇ
‚îú‚îÄ‚îÄ executor.py                ‚Üê –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ CommandExecutor
‚îÇ       ‚îú‚îÄ‚îÄ execute_command()
‚îÇ       ‚îî‚îÄ‚îÄ match_and_execute()
‚îÇ
‚îú‚îÄ‚îÄ factory.py                 ‚Üê –§–∞–±—Ä–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ create_command_system()
‚îÇ
‚îî‚îÄ‚îÄ implementations/           ‚Üê 8 –≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
    ‚îú‚îÄ‚îÄ start_command.py       ‚Üê /start
    ‚îú‚îÄ‚îÄ help_command.py        ‚Üê /help
    ‚îú‚îÄ‚îÄ build_command.py       ‚Üê /build
    ‚îú‚îÄ‚îÄ users_command.py       ‚Üê /users (admin)
    ‚îú‚îÄ‚îÄ groups_command.py      ‚Üê /groups (admin)
    ‚îú‚îÄ‚îÄ register_group_command.py ‚Üê /register_group
    ‚îú‚îÄ‚îÄ unblock_user_command.py   ‚Üê /unblock_user (admin)
    ‚îî‚îÄ‚îÄ block_user_command.py     ‚Üê /block_user (admin)
```

---

## üöÄ –ü—Ä–∏–º–µ—Ä: –ö–∞–∫ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É

### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `weather_command.py`:

```python
from typing import List, Optional
from ..base import Command, CommandContext, CommandResult

class WeatherCommand(Command):
    def get_command_name(self) -> str:
        return "/weather"
    
    def get_semantic_tags(self) -> List[str]:
        return ["–ø–æ–≥–æ–¥–∞", "–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞", "–ø—Ä–æ–≥–Ω–æ–∑"]
    
    async def can_execute(self, ctx) -> tuple[bool, Optional[str]]:
        return await self._check_user_access(ctx.update, require_admin=False)
    
    async def execute(self, ctx) -> CommandResult:
        await ctx.update.effective_message.reply_text("‚òÄÔ∏è +20¬∞C")
        return CommandResult(success=True)
```

### –î–æ–±–∞–≤—å—Ç–µ –≤ `factory.py`:

```python
commands = [
    # ...
    WeatherCommand(storage, admin_token),  # ‚Üê –¢–æ–ª—å–∫–æ —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞!
]
```

**–ì–æ—Ç–æ–≤–æ!** –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–Ω–∏–º–∞–µ—Ç:
- `/weather`
- "–ø–æ–≥–æ–¥–∞"
- "–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞"
- "–ø—Ä–æ–≥–Ω–æ–∑"

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| –†–∞–∑–º–µ—Ä bot.py | 764 —Å—Ç—Ä–æ–∫–∏ | 500 —Å—Ç—Ä–æ–∫ | ‚¨áÔ∏è -35% |
| –ú–µ—Å—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã | 7 | 2 | ‚¨áÔ∏è -71% |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –í—ã—Å–æ–∫–æ–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ | ‚¨ÜÔ∏è +90% |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ | –õ–µ–≥–∫–æ | ‚¨ÜÔ∏è +100% |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –û—Ç–ª–∏—á–Ω–∞—è | ‚¨ÜÔ∏è +80% |

---

## üì¶ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ `commands/base.py` ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å Command
- ‚úÖ `commands/registry.py` ‚Äî —Ä–µ–µ—Å—Ç—Ä –∫–æ–º–∞–Ω–¥ —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º
- ‚úÖ `commands/executor.py` ‚Äî –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥
- ‚úÖ `commands/factory.py` ‚Äî —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 8 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:
- ‚úÖ StartCommand ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- ‚úÖ HelpCommand ‚Äî —Å–ø—Ä–∞–≤–∫–∞
- ‚úÖ BuildCommand ‚Äî –≤—ã–±–æ—Ä —Å–±–æ—Ä–∫–∏
- ‚úÖ UsersCommand ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (admin)
- ‚úÖ GroupsCommand ‚Äî —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø (admin)
- ‚úÖ RegisterGroupCommand ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã
- ‚úÖ UnblockUserCommand ‚Äî —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin)
- ‚úÖ BlockUserCommand ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- ‚úÖ `bot_v2.py` ‚Äî –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞ —Å Command Pattern
- ‚úÖ `di.py` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ `main_v2.py` ‚Äî –ø—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `COMMAND_PATTERN_GUIDE.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `COMMAND_PATTERN_SUMMARY.md` ‚Äî —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ `ARCHITECTURE.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ `QUICKSTART.md` ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `COMPARISON.md` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª

### –¢–µ—Å—Ç—ã:
- ‚úÖ `test_command_pattern.py` ‚Äî unit-—Ç–µ—Å—Ç—ã

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1Ô∏è‚É£ –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è
–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ ‚Äî —ç—Ç–æ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∫–ª–∞—Å—Å:
```python
class MyCommand(Command):
    # ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
    async def can_execute(...)
    
    # ‚úÖ –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    async def execute(...)
    
    # ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏
    def get_semantic_tags(...)
    
    # ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    def get_parameter_patterns(...)
```

### 2Ô∏è‚É£ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ 10 –∫–æ–º–∞–Ω–¥ = 10 —Ñ–∞–π–ª–æ–≤ + 10 —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–±—Ä–∏–∫–µ.
–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞!

### 3Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
–ö–∞–∂–¥—É—é –∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:
```python
def test_start_command():
    command = StartCommand(mock_storage, "token")
    result = await command.execute(mock_ctx)
    assert result.success
```

### 4Ô∏è‚É£ –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å
–ö–æ–¥ —Å—Ç–∞–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

### 5Ô∏è‚É£ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ —á–µ—Ä–µ–∑ `CommandExecutor`.

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (`bot.py`) –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
–í—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:**
   ```bash
   export BOT_TOKEN="your_token"
   python python/main_v2.py
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ "/start"
   - –°–∫–∞–∂–∏—Ç–µ "–ø—Ä–∏–≤–µ—Ç"
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ "–ø–æ–∫–∞–∂–∏ —Å–±–æ—Ä–∫–∏"

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
   ```bash
   pytest python/tests/test_command_pattern.py -v
   ```

4. **–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É** (—Å–º. QUICKSTART.md)

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–æ–º–∞–Ω–¥–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
```python
class StatusCommand(Command):
    def get_command_name(self) -> str:
        return "/status"
    
    def get_semantic_tags(self) -> List[str]:
        return ["—Å—Ç–∞—Ç—É—Å", "—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã"]
    
    async def execute(self, ctx) -> CommandResult:
        await ctx.update.effective_message.reply_text("‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!")
        return CommandResult(success=True)
```

### –ö–æ–º–∞–Ω–¥–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```python
class SendMessageCommand(Command):
    def get_semantic_tags(self) -> List[str]:
        return ["–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ", "–Ω–∞–ø–∏—Å–∞—Ç—å"]
    
    def get_parameter_patterns(self) -> Dict[str, List[str]]:
        return {
            "recipient": [r"–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ ([–ê-–Ø–∞-—è]+)"],
            "text": [r"—Ç–µ–∫—Å—Ç: (.+)"]
        }
    
    async def execute(self, ctx) -> CommandResult:
        recipient = ctx.params.get("recipient")
        text = ctx.params.get("text")
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è...
        return CommandResult(success=True)
```

### –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥–∞:
```python
class RestartCommand(Command):
    def get_command_name(self) -> str:
        return "/restart"
    
    async def can_execute(self, ctx) -> tuple[bool, Optional[str]]:
        # –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤!
        return await self._check_user_access(ctx.update, require_admin=True)
    
    async def execute(self, ctx) -> CommandResult:
        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞...
        return CommandResult(success=True)
```

---

## ‚úÖ –í—ã–≤–æ–¥—ã

–ü–∞—Ç—Ç–µ—Ä–Ω Command —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

1. ‚úÖ **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏** ‚Äî –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–µ—Ç –æ —Å–≤–æ–∏—Ö –ø—Ä–∞–≤–∞—Ö –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–∏
2. ‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏** ‚Äî —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π
3. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî matcher –Ω–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –∫–æ–º–∞–Ω–¥
4. ‚úÖ **–ß–∏—Å—Ç—ã–π –∫–æ–¥** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞ —Å—Ç–∞–ª –∫–æ—Ä–æ—á–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ
5. ‚úÖ **–õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è** ‚Äî –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ = 1 —Ñ–∞–π–ª + 1 —Å—Ç—Ä–æ–∫–∞

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

