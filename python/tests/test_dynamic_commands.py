#!/usr/bin/env python3
"""
Test script for dynamic command parameter extraction.
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–º–∞–Ω–¥.
"""

import sys
import os
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'src'))

from easybuild_bot.command_matcher import CommandMatcher

def test_dynamic_commands():
    """Test dynamic command recognition with parameter extraction."""
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n")
    
    # Initialize matcher
    matcher = CommandMatcher()
    
    # Test cases
    test_cases = [
        # Unblock user commands - –° "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (—Ä–∞–∑–Ω—ã–µ –ø–∞–¥–µ–∂–∏)
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–∏—Ä–æ—Å–ª–∞–≤–∞",  # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ú–∏—Ä–æ—Å–ª–∞–≤–∞",  # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–î–∞—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ò–≤–∞–Ω",          # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–î–∞—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ò–≤–∞–Ω",          # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ê–Ω–Ω–∞",  # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ê–Ω–Ω–∞",  # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ü–µ—Ç—Ä",         # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –û–ª—å–≥–∞",      # –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ò–≤–∞–Ω",      # —Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        
        # Unblock user commands - –° "—é–∑–µ—Ä–∞" (—Ä–∞–∑–Ω—ã–µ –ø–∞–¥–µ–∂–∏)
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —é–∑–µ—Ä–∞ –ú–∏—Ä–æ—Å–ª–∞–≤–∞",         # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —é–∑–µ—Ä—É –ú–∏—Ä–æ—Å–ª–∞–≤–∞",         # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–î–∞—Ç—å –¥–æ—Å—Ç—É–ø —é–∑–µ—Ä –ò–≤–∞–Ω",                  # –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–î–∞—Ç—å –¥–æ—Å—Ç—É–ø —é–∑–µ—Ä—É –ò–≤–∞–Ω",                 # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —é–∑–µ—Ä–∞ –û–ª—å–≥–∞",               # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        
        # Unblock user commands - –ë–ï–ó "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (–ø—Ä—è–º–æ –∏–º—è)
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ê–Ω–Ω—É",
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ú–∏—Ä–æ—Å–ª–∞–≤–∞",
        "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ò–≤–∞–Ω",
        "–í–∫–ª—é—á–∏—Ç—å –ü–µ—Ç—Ä",
        "–î–∞—Ç—å –¥–æ—Å—Ç—É–ø –û–ª—å–≥–∞",
        "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –ê–Ω–Ω–∞",
        
        # Block user commands - –° "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (—Ä–∞–∑–Ω—ã–µ –ø–∞–¥–µ–∂–∏)
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–∏—Ä–æ—Å–ª–∞–≤–∞",   # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –°–µ—Ä–≥–µ–π",      # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –°–µ—Ä–≥–µ–π",          # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ê–ª–µ–∫—Å–∞–Ω–¥—Ä",       # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä",# —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –í–ª–∞–¥–∏–º–∏—Ä", # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        
        # Block user commands - –° "—é–∑–µ—Ä–∞" (—Ä–∞–∑–Ω—ã–µ –ø–∞–¥–µ–∂–∏)
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —é–∑–µ—Ä–∞ –î–º–∏—Ç—Ä–∏–π",            # —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —é–∑–µ—Ä—É –î–º–∏—Ç—Ä–∏–π",            # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        "–û—Ç–∫–ª—é—á–∏—Ç—å —é–∑–µ—Ä –ï–ª–µ–Ω–∞",                   # –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
        "–û—Ç–∫–ª—é—á–∏—Ç—å —é–∑–µ—Ä—É –ï–ª–µ–Ω–∞",                  # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–ù–û–í–û–ï!)
        
        # Block user commands - –ë–ï–ó "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" (–ø—Ä—è–º–æ –∏–º—è)
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –°–µ—Ä–≥–µ–π",
        "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –î–º–∏—Ç—Ä–∏—è",
        "–û—Ç–∫–ª—é—á–∏—Ç—å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä",
        "–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ï–ª–µ–Ω–∞",
        "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –í–ª–∞–¥–∏–º–∏—Ä",
        
        # Edge cases
        "—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–∏—Ä–æ—Å–ª–∞–≤–∞",               # lowercase
        "—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–Ω—É",                    # lowercase –±–µ–∑ "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        "–†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –í–õ–ê–î–ò–ú–ò–†",                # uppercase –±–µ–∑ "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        "–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–Ω–Ω–∞",  # –¥–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ lowercase (–ù–û–í–û–ï!)
        "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å",                         # no name
        
        # Existing commands (should still work)
        "–ü—Ä–∏–≤–µ—Ç",
        "–ø–æ–∫–∞–∂–∏ —Å–±–æ—Ä–∫–∏",
        "—Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
    ]
    
    for text in test_cases:
        print(f"üìù –¢–µ—Å—Ç: \"{text}\"")
        result = matcher.match_command(text)
        
        if result:
            command, similarity, params = result
            print(f"  ‚úÖ –ö–æ–º–∞–Ω–¥–∞: {command}")
            print(f"  üìä –°—Ö–æ–∂–µ—Å—Ç—å: {similarity:.3f}")
            if params:
                print(f"  üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: {params}")
            else:
                print(f"  üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –Ω–µ—Ç")
        else:
            print(f"  ‚ùå –ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞")
        print()

if __name__ == "__main__":
    test_dynamic_commands()

